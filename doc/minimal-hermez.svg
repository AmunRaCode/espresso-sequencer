<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1046px" preserveAspectRatio="none" style="width:1154px;height:1046px;background:#FFFFFF;" version="1.1" viewBox="0 0 1154 1046" width="1154px" zoomAndPan="magnify"><defs/><g><!--MD5=[f7217341b3bb6bbf768c7f0e049f8d09]
cluster Legend--><g id="cluster_Legend"><rect fill="none" height="250.5" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="350" x="798" y="142.5"/><path d="M867,142.5 L867,151.7969 L857,161.7969 L798,161.7969 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59" x="801" y="156.4951">Legend</text></g><!--MD5=[3746f487d7820090e32c72dc756be46d]
cluster HotShotExternal--><g id="cluster_HotShotExternal"><path d="M624.5,135 L761.5,135 A3.75,3.75 0 0 1 764,137.5 L771,173.5938 L771.5,173.5938 A2.5,2.5 0 0 1 774,176.0938 L774,235.5 A2.5,2.5 0 0 1 771.5,238 L624.5,238 A2.5,2.5 0 0 1 622,235.5 L622,137.5 A2.5,2.5 0 0 1 624.5,135 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="622" x2="771" y1="173.5938" y2="173.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="662.5" y="149.9951">HotShot</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="136" x="626" y="166.292">(other instances)</text></g><!--MD5=[074479fc2b8718e85f223949db21494f]
cluster Decentralized Sequencer--><g id="cluster_Decentralized Sequencer"><path d="M213.5,6 L414.5,6 A3.75,3.75 0 0 1 417,8.5 L424,28.2969 L595.5,28.2969 A2.5,2.5 0 0 1 598,30.7969 L598,414.5 A2.5,2.5 0 0 1 595.5,417 L213.5,417 A2.5,2.5 0 0 1 211,414.5 L211,8.5 A2.5,2.5 0 0 1 213.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="211" x2="424" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="200" x="215" y="20.9951">Decentralized Sequencer</text></g><!--MD5=[bcfbdd31683a7d01cd062dc0c4be3661]
cluster zkApp--><g id="cluster_zkApp"><path d="M237.5,49 L323.5,49 A3.75,3.75 0 0 1 326,51.5 L333,71.2969 L571.5,71.2969 A2.5,2.5 0 0 1 574,73.7969 L574,390.5 A2.5,2.5 0 0 1 571.5,393 L237.5,393 A2.5,2.5 0 0 1 235,390.5 L235,51.5 A2.5,2.5 0 0 1 237.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="235" x2="333" y1="71.2969" y2="71.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85" x="239" y="63.9951">zkEVM app</text></g><!--MD5=[975d7fda8cf98ff1a26ca528bf10cecf]
cluster App--><g id="cluster_App"><path d="M269.5,100 L475.5,100 A3.75,3.75 0 0 1 478,102.5 L485,122.2969 L539.5,122.2969 A2.5,2.5 0 0 1 542,124.7969 L542,267.5 A2.5,2.5 0 0 1 539.5,270 L269.5,270 A2.5,2.5 0 0 1 267,267.5 L267,102.5 A2.5,2.5 0 0 1 269.5,100 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="267" x2="485" y1="122.2969" y2="122.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="205" x="271" y="114.9951">Txn-ordering HotShot app</text></g><!--MD5=[583d55fc1e2a49743832e160d5573292]
cluster HotShot--><g id="cluster_HotShot"><path d="M309.5,151 L373.5,151 A3.75,3.75 0 0 1 376,153.5 L383,173.2969 L507.5,173.2969 A2.5,2.5 0 0 1 510,175.7969 L510,235.5 A2.5,2.5 0 0 1 507.5,238 L309.5,238 A2.5,2.5 0 0 1 307,235.5 L307,153.5 A2.5,2.5 0 0 1 309.5,151 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="307" x2="383" y1="173.2969" y2="173.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="63" x="311" y="165.9951">HotShot</text></g><!--MD5=[f5d269121e3c85f4d6e47cf49d169a0a]
cluster Connector--><g id="cluster_Connector"><path d="M211.5,511 L397.5,511 A3.75,3.75 0 0 1 400,513.5 L407,533.2969 L579.5,533.2969 A2.5,2.5 0 0 1 582,535.7969 L582,595.5 A2.5,2.5 0 0 1 579.5,598 L211.5,598 A2.5,2.5 0 0 1 209,595.5 L209,513.5 A2.5,2.5 0 0 1 211.5,511 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="209" x2="407" y1="533.2969" y2="533.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="185" x="213" y="525.9951">Espresso L2 Connector</text></g><!--MD5=[4499c58aefeb8777a4ef8729a6b9746a]
cluster L1--><g id="cluster_L1"><path d="M717.5,794 L818.5,794 A3.75,3.75 0 0 1 821,796.5 L828,816.2969 L870.5,816.2969 A2.5,2.5 0 0 1 873,818.7969 L873,878.5 A2.5,2.5 0 0 1 870.5,881 L717.5,881 A2.5,2.5 0 0 1 715,878.5 L715,796.5 A2.5,2.5 0 0 1 717.5,794 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="715" x2="828" y1="816.2969" y2="816.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="719" y="808.9951">Ethereum L1</text></g><!--MD5=[30107c386ad61863a1077fa9b8608265]
cluster L2--><g id="cluster_L2"><path d="M8.5,647 L142.5,647 A3.75,3.75 0 0 1 145,649.5 L152,669.2969 L675.5,669.2969 A2.5,2.5 0 0 1 678,671.7969 L678,1036.5 A2.5,2.5 0 0 1 675.5,1039 L8.5,1039 A2.5,2.5 0 0 1 6,1036.5 L6,649.5 A2.5,2.5 0 0 1 8.5,647 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="152" y1="669.2969" y2="669.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="133" x="10" y="661.9951">L2 (zkevm-node)</text></g><!--MD5=[72078431e26b572f5b2226d95bfc722b]
cluster HermezProver--><g id="cluster_HermezProver"><path d="M32.5,781 L152.5,781 A3.75,3.75 0 0 1 155,783.5 L162,803.2969 L377.5,803.2969 A2.5,2.5 0 0 1 380,805.7969 L380,891.5 A2.5,2.5 0 0 1 377.5,894 L32.5,894 A2.5,2.5 0 0 1 30,891.5 L30,783.5 A2.5,2.5 0 0 1 32.5,781 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="162" y1="803.2969" y2="803.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="119" x="34" y="795.9951">Hermez Prover</text></g><!--MD5=[88ac5a349f602fe1f404813fca609a66]
entity from zkevm-node--><g id="elem_from zkevm-node"><rect fill="#98FB98" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="814.5" y="186"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="824.5" y="208.9951">from zkevm-node</text></g><!--MD5=[bdd4bbf83bce11829469bb1563812001]
entity from zkevm-node\nmodified--><g id="elem_from zkevm-node\nmodified"><rect fill="#FFB6C1" height="52.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="990.5" y="177.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1000.5" y="200.4951">from zkevm-node</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="1000.5" y="216.792">modified</text></g><!--MD5=[4997e7c3dea50e5fac5b61f4c19450e8]
entity new/to be developed--><g id="elem_new/to be developed"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167" x="814.5" y="341"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="824.5" y="363.9951">new/to be developed</text></g><!--MD5=[896ddc638b163aeba3d9eafdbb3e5908]
entity GossipExternal--><g id="elem_GossipExternal"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="638" y="186"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="648" y="208.9951">Gossip</text></g><!--MD5=[1fdded0352c3e8b8e8e5fa4c440e3206]
entity Events--><g id="elem_Events"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="426.5" y="341"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="436.5" y="363.9951">Events</text></g><!--MD5=[fc241586e3e4cf255457dad9b5d09a8f]
entity Submit--><g id="elem_Submit"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="251.5" y="341"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="261.5" y="363.9951">Submit API</text></g><!--MD5=[72906ce1eb61e5bac7b26d06e51547ad]
entity GossipInternal--><g id="elem_GossipInternal"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="426" y="186"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="436" y="208.9951">Gossip</text></g><!--MD5=[657580825c081e24058a2374906e8018]
entity HotShotEvents--><g id="elem_HotShotEvents"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="323.5" y="186"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="333.5" y="208.9951">Events</text></g><!--MD5=[fe0bae4af69ca8947a410fa6d457e8ef]
entity Adapter--><g id="elem_Adapter"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="372.5" y="546"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="382.5" y="568.9951">HotShot-Hermez Adapter</text></g><!--MD5=[50891b5d658e0a5b3a68677ffe19f565]
entity Dispatch--><g id="elem_Dispatch"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="225" y="546"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="235" y="568.9951">RPC dispatch</text></g><!--MD5=[02772cf4a850889cc654a495925d36fb]
entity Rollup--><g id="elem_Rollup"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="731" y="829"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="741" y="851.9951">Rollup Contract</text></g><!--MD5=[ee57f16ef1ba8b49a548a5b41deaf6ed]
entity JsonRPC--><g id="elem_JsonRPC"><rect fill="#98FB98" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="200" y="682"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="210" y="704.9951">JsonRPC</text></g><!--MD5=[58f3bb20197d49c7ea139ae014477a42]
entity L2DB--><g id="elem_L2DB"><path d="M399,834.5 C399,824.5 469,824.5 469,824.5 C469,824.5 539,824.5 539,834.5 L539,859.7969 C539,869.7969 469,869.7969 469,869.7969 C469,869.7969 399,869.7969 399,859.7969 L399,834.5 " fill="#98FB98" style="stroke:#181818;stroke-width:0.5;"/><path d="M399,834.5 C399,844.5 469,844.5 469,844.5 C469,844.5 539,844.5 539,834.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="409" y="861.4951">L2 Blockchain DB</text></g><!--MD5=[45978046dcd5eebeac2fa904e53c0036]
entity Etherman--><g id="elem_Etherman"><rect fill="#FFB6C1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="574.5" y="829"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="584.5" y="851.9951">Etherman</text></g><!--MD5=[30dc00a6e98b45ee3ed5a73adbca65de]
entity Aggregator--><g id="elem_Aggregator"><rect fill="#98FB98" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="420.5" y="987"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="430.5" y="1009.9951">Aggregator</text></g><!--MD5=[c3bd79b6cca3d8fa787b3b807ac7237d]
entity Prover--><g id="elem_Prover"><rect fill="#98FB98" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="300" y="829"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="310" y="851.9951">Prover</text></g><!--MD5=[77b6810f9f1d8e17e1346401c10c77dc]
entity Executor--><g id="elem_Executor"><rect fill="#98FB98" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="46.5" y="829"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="56.5" y="851.9951">Executor</text></g><!--MD5=[47b51ac2f4ace7439b689a6295ba6363]
entity Tree--><g id="elem_Tree"><path d="M163,826 C163,816 214,816 214,816 C214,816 265,816 265,826 L265,867.5938 C265,877.5938 214,877.5938 214,877.5938 C214,877.5938 163,877.5938 163,867.5938 L163,826 " fill="#98FB98" style="stroke:#181818;stroke-width:0.5;"/><path d="M163,826 C163,836 214,836 214,836 C214,836 265,836 265,826 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="173" y="852.9951">L2 State DB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="173" y="869.292">Merkle Tree</text></g><!--MD5=[fee662a292a0353a69bd162820bae93b]
entity User--><g id="elem_User"><rect fill="#F1F1F1" height="36.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="84" y="546"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="94" y="568.9951">User</text></g><!--MD5=[56fe027e5cc5d0f185f1b7694283b179]
link User to Dispatch--><g id="link_User_Dispatch"><path d="M136.34,564 C158.12,564 189.93,564 218.19,564 " fill="none" id="User-to-Dispatch" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="223.02,564,214.02,560,218.02,564,214.02,568,223.02,564" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="154.5" y="542.0669">EVM txn</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="157" y="557.1997">queries</text></g><!--MD5=[9c42c1a64afdc0f74ff55abbc2fbb64f]
link Dispatch to JsonRPC--><g id="link_Dispatch_JsonRPC"><path d="M275.6,582.24 C268.13,606.06 254.64,649.11 246.29,675.75 " fill="none" id="Dispatch-to-JsonRPC" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="244.84,680.38,251.355,672.9939,246.3395,675.6101,243.7232,670.5947,244.84,680.38" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="266" y="627.0669">Queries</text></g><!--MD5=[7daebf69a253423dbe488f39d44c4ffe]
reverse link Submit to Dispatch--><g id="link_Submit_Dispatch"><path d="M296.03,383.55 C292.57,424.84 285.49,509.37 282.45,545.74 " fill="none" id="Submit-backto-Dispatch" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="296.42,378.82,291.6885,387.4579,296.006,383.8028,299.661,388.1203,296.42,378.82" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="293" y="468.5669">EVM txn</text></g><!--MD5=[91cafd777a61df7305284aff3f8c2f32]
link GossipInternal to GossipExternal--><g id="link_GossipInternal_GossipExternal"><path d="M500.8,204 C544.28,204 587.76,204 631.24,204 " fill="none" id="GossipInternal-GossipExternal" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="636.14,204,627.14,200,631.14,204,627.14,208,636.14,204" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="495.88,204,504.88,208,500.88,204,504.88,200,495.88,204" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d6bb6ce03a9f994459ffb589e7e3403e]
link Events to Adapter--><g id="link_Events_Adapter"><path d="M460.77,377.31 C462.38,413.64 466.11,497.89 467.95,539.24 " fill="none" id="Events-to-Adapter" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="468.17,544.22,471.7536,535.0463,467.941,539.2252,463.762,535.4126,468.17,544.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="485.5" y="446.0669">stream:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="467" y="461.1997">order commit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="19" x="501" y="476.3325">QC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="492.5" y="491.4653">batch</text></g><!--MD5=[f7bb2591de48263be8c8226597d79ad9]
link Adapter to L2DB--><g id="link_Adapter_L2DB"><path d="M469,582.15 C469,629.08 469,759.92 469,817.82 " fill="none" id="Adapter-to-L2DB" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="469,822.67,473,813.67,469,817.67,465,813.67,469,822.67" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="470" y="704.5669">batch</text></g><!--MD5=[959b278cda2aeba0f8481a95d3753114]
link Adapter to Rollup--><g id="link_Adapter_Rollup"><path d="M561.43,582.46 C600.71,593.51 644.96,611.16 678,639 C738.08,689.62 773.02,779.7 786.94,822.35 " fill="none" id="Adapter-to-Rollup" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="788.45,827.09,789.5401,817.3017,786.9375,822.3242,781.9149,819.7216,788.45,827.09" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="742" y="697.0669">order commit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="19" x="776" y="712.1997">QC</text></g><!--MD5=[0f85c64cbe394fdbbcb7903f2cd04337]
link JsonRPC to L2DB--><g id="link_JsonRPC_L2DB"><path d="M278.25,718.26 C307.25,731.67 347.23,751.55 380,773 C401.4,787 423.64,805.25 440.54,820 " fill="none" id="JsonRPC-to-L2DB" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="444.02,823.06,439.8976,814.1154,440.2633,819.7604,434.6183,820.1261,444.02,823.06" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="367" y="761.0669">read</text></g><!--MD5=[54efc4a2d23f41f3f0dc12b7324a18cb]
link JsonRPC to Tree--><g id="link_JsonRPC_Tree"><path d="M235.98,718.49 C232.13,740.83 225.37,780.07 220.36,809.14 " fill="none" id="JsonRPC-to-Tree" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="219.51,814.06,224.9929,805.8785,220.3667,809.1339,217.1112,804.5077,219.51,814.06" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="232" y="761.0669">accounts</text></g><!--MD5=[9eb4f09f33922fd95390af3a7601fb36]
link JsonRPC to Executor--><g id="link_JsonRPC_Executor"><path d="M206.78,718.3 C193.16,726.39 177.58,736.72 165,748 C139.63,770.75 116.09,802.37 101.65,823.48 " fill="none" id="JsonRPC-to-Executor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="99.02,827.35,107.3737,822.1332,101.8198,823.2074,100.7456,817.6535,99.02,827.35" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="166" y="761.0669">call, etc.</text></g><!--MD5=[d2037736c60e89dbe3d252977f93be51]
reverse link L2DB to Aggregator--><g id="link_L2DB_Aggregator"><path d="M469,875.85 C469,908.04 469,960.02 469,986.81 " fill="none" id="L2DB-backto-Aggregator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="469,871.2,465,880.2,469,876.2,473,880.2,469,871.2" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="470.5" y="923.0669">fetch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="470" y="938.1997">proof</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="470.5" y="953.3325">input</text></g><!--MD5=[a06b050604dc79b3c8eff1ea1e77601c]
reverse link Etherman to Aggregator--><g id="link_Etherman_Aggregator"><path d="M597.27,869.71 C567.42,900.96 512.94,958 485.59,986.63 " fill="none" id="Etherman-backto-Aggregator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="600.44,866.39,591.3284,870.1289,596.9839,870.0032,597.1096,875.6587,600.44,866.39" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="558" y="938.0669">proof</text></g><!--MD5=[2c39d7ae860f67833afbb5bbaf9a4425]
reverse link Prover to Aggregator--><g id="link_Prover_Aggregator"><path d="M343.06,871 C355.09,894.44 375.97,930.94 401,957 C411.93,968.39 426.03,978.66 438.55,986.69 " fill="none" id="Prover-backto-Aggregator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="340.88,866.69,341.3775,876.5263,343.1389,871.1506,348.5146,872.912,340.88,866.69" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="402" y="930.5669">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="414.5" y="945.6997">proof</text></g><!--MD5=[0ca7d036d4fc0c343f6b4beaa6721ac7]
link Etherman to Rollup--><g id="link_Etherman_Rollup"><path d="M661.96,847 C680.78,847 703.23,847 724.22,847 " fill="none" id="Etherman-to-Rollup" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="729.18,847,720.18,843,724.18,847,720.18,851,729.18,847" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="679.75" y="840.0669">proof</text></g><!--MD5=[eb6b988b0512d6b84233d2583692179c]
reverse link App to Submit--><g id="link_App_Submit"><path d="M284.829,270.3932 C285.3806,274.0628 285.9375,277.7673 286.4944,281.4718 C287.6082,288.8809 288.722,296.2904 289.7941,303.4223 C291.9381,317.6863 293.915,330.84 295.39,340.66 " fill="none" id="App-backto-Submit" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="284.829,270.3932,282.2114,279.8879,285.5723,275.3377,290.1225,278.6986,284.829,270.3932" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="292" y="307.0669">wrap in HotShot txn</text></g><!--MD5=[25a03e75ea8af1b5fbad106de56d561d]
link HotShotEvents to Events--><g id="link_HotShotEvents_Events"><path d="M364.12,222.36 C372.32,240.43 387.35,268.47 408,286 C414.99,291.93 420.27,287.78 427,294 C438.94,305.04 447.26,321.39 452.57,334.8 " fill="none" id="HotShotEvents-to-Events" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="454.26,339.3,454.8452,329.4685,452.5044,334.6184,447.3546,332.2775,454.26,339.3" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9c0527db3039d4dd78fcc8bd39648a33]
@startuml
skinparam componentStyle rectangle

frame Legend {
  component "from zkevm-node" #PaleGreen
  component "from zkevm-node\nmodified" #LightPink
  component "new/to be developed"
}

component User
package "HotShot\n(other instances)" as HotShotExternal {
  component "Gossip" as GossipExternal
}

package "Decentralized Sequencer" {
  package "zkEVM app" as zkApp {
    component Events
    component "Submit API" as Submit
    package "Txn-ordering HotShot app" as App {
      package HotShot {
        component "Gossip" as GossipInternal
        component "Events" as HotShotEvents
      }
    }
  }
}


package "Espresso L2 Connector" as Connector {
  component "HotShot-Hermez Adapter" as Adapter
  component "RPC dispatch" as Dispatch
}

package "Ethereum L1" as L1 {
  component "Rollup Contract" as Rollup
  ' component "Bridge L1" as BridgeL1 #PaleGreen
}


package "L2 (zkevm-node)" as L2 {
  component JsonRPC #PaleGreen
  database L2DB #PaleGreen [
    L2 Blockchain DB
  ]
  package "Hermez Prover" as HermezProver {
    component Prover #PaleGreen
    component Executor #PaleGreen
    database Tree #PaleGreen [
      L2 State DB
      Merkle Tree
    ]
  }
  'component "Bridge L2" as BridgeL2 #PaleGreen
  component Etherman #LightPink
  component Aggregator #PaleGreen
}

User -> Dispatch: EVM txn\nqueries
Dispatch - -> JsonRPC: Queries
Dispatch -up-> Submit: EVM txn

GossipInternal <-> GossipExternal

Events - -> Adapter: stream:\norder commit\nQC\nbatch

Adapter -> L2DB: batch
Adapter -> Rollup: order commit\nQC

JsonRPC - -> L2DB: read
JsonRPC - -> Tree: accounts
JsonRPC - -> Executor: call, etc.

Aggregator -up-> L2DB: fetch\nproof\ninput
Aggregator -up-> Etherman: proof
Aggregator -up-> Prover: generate\nproof
Etherman -> Rollup: proof

' Prover ..> BridgeL2
' User - -> BridgeL1
Submit -up-> App: wrap in HotShot txn
HotShotEvents -down-> Events

@enduml

@startuml
skinparam componentStyle rectangle

frame Legend {
  component "from zkevm-node" #PaleGreen
  component "from zkevm-node\nmodified" #LightPink
  component "new/to be developed"
}

component User
package "HotShot\n(other instances)" as HotShotExternal {
  component "Gossip" as GossipExternal
}

package "Decentralized Sequencer" {
  package "zkEVM app" as zkApp {
    component Events
    component "Submit API" as Submit
    package "Txn-ordering HotShot app" as App {
      package HotShot {
        component "Gossip" as GossipInternal
        component "Events" as HotShotEvents
      }
    }
  }
}


package "Espresso L2 Connector" as Connector {
  component "HotShot-Hermez Adapter" as Adapter
  component "RPC dispatch" as Dispatch
}

package "Ethereum L1" as L1 {
  component "Rollup Contract" as Rollup
}


package "L2 (zkevm-node)" as L2 {
  component JsonRPC #PaleGreen
  database L2DB #PaleGreen [
    L2 Blockchain DB
  ]
  package "Hermez Prover" as HermezProver {
    component Prover #PaleGreen
    component Executor #PaleGreen
    database Tree #PaleGreen [
      L2 State DB
      Merkle Tree
    ]
  }
  component Etherman #LightPink
  component Aggregator #PaleGreen
}

User -> Dispatch: EVM txn\nqueries
Dispatch - -> JsonRPC: Queries
Dispatch -up-> Submit: EVM txn

GossipInternal <-> GossipExternal

Events - -> Adapter: stream:\norder commit\nQC\nbatch

Adapter -> L2DB: batch
Adapter -> Rollup: order commit\nQC

JsonRPC - -> L2DB: read
JsonRPC - -> Tree: accounts
JsonRPC - -> Executor: call, etc.

Aggregator -up-> L2DB: fetch\nproof\ninput
Aggregator -up-> Etherman: proof
Aggregator -up-> Prover: generate\nproof
Etherman -> Rollup: proof

Submit -up-> App: wrap in HotShot txn
HotShotEvents -down-> Events

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>