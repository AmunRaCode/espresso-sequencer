@startuml
package "WWW" {
  component User
  package "HotShot" as HotShotExternal {
    component "Gossip" as GossipExternal
  }
}

package "Decentralized Sequencer" {
  package "zkEVM app" as zkApp {
    component "Submit API" as Submit
    component Events
    package "Txn-ordering HotShot app" as App {
      package HotShot {
        component "Gossip" as GossipInternal
      }
    }
  }
}

package L2 {
  component L2DB #lightgrey [
    L2 Blockchain DB

    blocks
    receipts
    logs
  ]
  component Prover
  component Executor #lightgrey
  component Tree [
    L2 State DB
    Merkle Tree
  ]
  component "Bridge L2" as BridgeL2 #lightgrey
}

package L1 {
  component Rollup [
    Rollup Contract
  ]
  component "Bridge L1" as BridgeL1 #lightgrey
}

GossipInternal <--> GossipExternal
Prover -> BridgeL2
User -down-> Submit: EVM txn
User --> BridgeL1
Submit -> App: HotShot txn

Executor --> Tree: execute (dry-run)
Prover --> Tree: apply txns
Events --> Prover: stream batch
Prover --> Rollup: proof, QC
@enduml
